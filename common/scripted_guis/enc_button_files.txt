scripted_gui = {
	connect_to_power = {
	
		context_type = selected_state_context
		
		window_name = "connect_to_power_container"		
		parent_window_token = selected_state_view
		
		visible = {
			ROOT =  {
				has_completed_focus = enc_reform			
			}
			is_controlled_by = ROOT
			# any neighbour state is cored
			ROOT = { 
				tag = ERB
			}
			NOT = { 
				is_core_of = FROM
			}
			
		}
		
		effects = {
			connect_to_power_click = {
				ROOT = { 
					add_political_power = -100 					
				}
				add_core_of = FROM
				add_resource = { type = electricity amount = -5 state = 291 } #VLT city
			}
		}
		triggers = {
			connect_to_power_click_enabled = {
				check_variable = { ROOT.political_power > 99.99 }
			}
		}
		        
		ai_check = {
			check_variable = { ROOT.political_power > 99.99 }
			check_variable = { ai_random > 0.55 }
		}
		
		ai_weights = {
			connect_to_power_click = {
				ai_will_do = {
					factor = 40
				}
			}
		}
	}
	install_police_force = {
	
		context_type = selected_state_context
		
		window_name = "install_police_force_container"		
		parent_window_token = selected_state_view
		
		visible = {
			ROOT =  {
				has_completed_focus = enc_reform			
			}
			is_controlled_by = ROOT
			# any neighbour state is cored
			ROOT = { 
				tag = ERB
			}
			NOT = { 
				is_core_of = FROM
			}
		}
		
		effects = {
			install_police_force_click = {
				ROOT = { 
					add_political_power = -100 					
				}
				add_core_of = FROM
			}
		}
		triggers = {
			install_police_force_click_enabled = {
				check_variable = { ROOT.political_power > 99.99 }
				# equipment
			}
		}
		        
		ai_check = {
			check_variable = { ROOT.political_power > 99.99 }
			check_variable = { ai_random > 0.55 }
		}
		
		ai_weights = {
			install_police_force_click = {
				ai_will_do = {
					factor = 40
				}
			}
		}
	}
	legitimacy = {
		context_type = player_context
		
		window_name = "legitimacy_container"
		
		visible = {
			original_tag = ERB
			has_completed_focus = enc_reform
		}
		
		effects = {
			legitimacy_bg_click = {
				# nothing
			}
			
			legitimacy_bg_right_click = { #todo remove me todo
				add_to_variable = { legitimacy = 100 }
				set_variable = { legitimacy_max = 500 }
			}
		}
	}

	arm_rebels = {
	
		context_type = selected_state_context
		
		window_name = arm_rebels_container
		parent_window_token = selected_state_view
		
		visible = {
			is_core_of = BAR
			ROOT =  { 
				has_completed_focus = enc_reform
				NOT = {
					has_country_flag = enc_petition_delivered
				}
			}			
		}		
		effects = {
			arm_rebels_click = {
				ROOT = { 
					add_political_power = -50		
				}
				set_state_flag = enc_rebels_armed
				custom_effect_tooltip = arm_rebels_ttt
			}
		}
		triggers = {
			arm_rebels_click_enabled = {
				ROOT = { 
					has_political_power > 49.99		
				}
				NOT = {
					has_state_flag = enc_rebels_armed
				}
			}
		}
		        
		ai_check = {
			check_variable = { ai_random > 0.55 }
		}
		
		ai_weights = {
			connect_to_power_click = {
				ai_will_do = {
					factor = 40
				}
			}
		}
	}	
}

